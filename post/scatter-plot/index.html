<!DOCTYPE html><html lang="en-us" >

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.8.0">

  

  
  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Cuong Sai">

  
  
  
    
  
  <meta name="description" content="Nội dung của bài bao gồm:
1. Ý nghĩa của biểu đồ tán xạ trong bài toán dự đoán.
2. Cách vẽ biểu đồ tán xạ trong R.
3. Dùng biểu đồ tán xạ để đánh giá chất lượng mô hình dự đoán.">

  
  <link rel="alternate" hreflang="en-us" href="/post/scatter-plot/">

  


  
  
  
  <meta name="theme-color" content="#2962ff">
  

  
  
  
  <script src="/js/mathjax-config.js"></script>
  

  
  
  
  
    
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha256-FMvZuGapsJLjouA6k7Eo2lusoAX9i0ShlWFG6qt7SLc=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.css" integrity="sha256-SHMGCYmST46SoyGgo4YR/9AlK1vf3ff84Aq9yK4hdqM=" crossorigin="anonymous">
    

    

    
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js" integrity="sha256-Md1qLToewPeKjfAHU1zyPwOutccPAm5tahnaw7Osw0A=" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" integrity="" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    

  

  
  
  
    
      
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,700%7CRoboto:400,400italic,700%7CRoboto+Mono&display=swap">
    
  

  
  
  
  
  <link rel="stylesheet" href="/css/academic.css">

  





<script async src="https://www.googletagmanager.com/gtag/js?id=UA-128408660-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];

  function gtag() {
      dataLayer.push(arguments);
  }

  function trackOutboundLink(url, target) {
    gtag('event', 'click', {
         'event_category': 'outbound',
         'event_label': url,
         'transport_type': 'beacon',
         'event_callback': function () {
           if (target !== '_blank') {
             document.location = url;
           }
         }
    });
    console.debug("Outbound link clicked: " + url);
  }

  function onClickCallback(event) {
    if ((event.target.tagName !== 'A') || (event.target.host === window.location.host)) {
      return;
    }
    trackOutboundLink(event.target, event.target.getAttribute('target'));  
  }

  gtag('js', new Date());
  gtag('config', 'UA-128408660-5', {});

  
  document.addEventListener('click', onClickCallback, false);
</script>


  


  
  

  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/images/icon_hu47efca792e1e7000f9078d7b8f1dac48_31011_32x32_fill_lanczos_center_2.PNG">
  <link rel="apple-touch-icon" type="image/png" href="/images/icon_hu47efca792e1e7000f9078d7b8f1dac48_31011_192x192_fill_lanczos_center_2.PNG">

  <link rel="canonical" href="/post/scatter-plot/">

  
  
  
  
  
  
  
    
    
  
  
  <meta property="twitter:card" content="summary">
  
  <meta property="og:site_name" content="Khoa Học Dữ Liệu">
  <meta property="og:url" content="/post/scatter-plot/">
  <meta property="og:title" content="Ý  nghĩa của biểu đồ tán xạ (scatter plot) trong dự đoán và đánh giá chất lượng mô hình dự đoán. | Khoa Học Dữ Liệu">
  <meta property="og:description" content="Nội dung của bài bao gồm:
1. Ý nghĩa của biểu đồ tán xạ trong bài toán dự đoán.
2. Cách vẽ biểu đồ tán xạ trong R.
3. Dùng biểu đồ tán xạ để đánh giá chất lượng mô hình dự đoán."><meta property="og:image" content="/images/icon_hu47efca792e1e7000f9078d7b8f1dac48_31011_512x512_fill_lanczos_center_2.PNG">
  <meta property="twitter:image" content="/images/icon_hu47efca792e1e7000f9078d7b8f1dac48_31011_512x512_fill_lanczos_center_2.PNG"><meta property="og:locale" content="en-us">
  
    
      <meta property="article:published_time" content="2020-08-26T00:00:00&#43;00:00">
    
    <meta property="article:modified_time" content="2020-08-26T14:16:28&#43;04:00">
  

  


    






  




<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "/post/scatter-plot/"
  },
  "headline": "Ý  nghĩa của biểu đồ tán xạ (scatter plot) trong dự đoán và đánh giá chất lượng mô hình dự đoán.",
  
  "datePublished": "2020-08-26T00:00:00Z",
  "dateModified": "2020-08-26T14:16:28+04:00",
  
  "author": {
    "@type": "Person",
    "name": "Cuong Sai"
  },
  
  "publisher": {
    "@type": "Organization",
    "name": "Khoa Học Dữ Liệu",
    "logo": {
      "@type": "ImageObject",
      "url": "/images/icon_hu47efca792e1e7000f9078d7b8f1dac48_31011_192x192_fill_lanczos_center_2.PNG"
    }
  },
  "description": "Nội dung của bài bao gồm:\n1. Ý nghĩa của biểu đồ tán xạ trong bài toán dự đoán.\n2. Cách vẽ biểu đồ tán xạ trong R.\n3. Dùng biểu đồ tán xạ để đánh giá chất lượng mô hình dự đoán."
}
</script>

  

  


  


  





<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
      }
    });
    </script>
    <script async type="text/javascript"
      src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>

  <title>Ý  nghĩa của biểu đồ tán xạ (scatter plot) trong dự đoán và đánh giá chất lượng mô hình dự đoán. | Khoa Học Dữ Liệu</title>

</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class=" ">

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  












<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/">Khoa Học Dữ Liệu</a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/">Khoa Học Dữ Liệu</a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        
          
            
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="https://svcuong.github.io/" target="_blank" rel="noopener"><span>Home</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link  active" href="/post/"><span>Blog</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
            
            
            
              
            
            
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#tags"><span>Topics</span></a>
        </li>

        
        

        
        <li class="nav-item dropdown">
          <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"><span>Research</span><span class="caret"></span>
          </a>
          <div class="dropdown-menu">
            
              <a class="dropdown-item" href="/publication/"><span>All Publications</span></a>
            
              <a class="dropdown-item" href="/#publications"><span>Recent Publications</span></a>
            
              <a class="dropdown-item" href="/#featured"><span>Featured Publications</span></a>
            
              <a class="dropdown-item" href="/#projects"><span>My Projects</span></a>
            
              <a class="dropdown-item" href="/#conference"><span>Conferences</span></a>
            
          </div>
        </li>

        
        

        
        <li class="nav-item dropdown">
          <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"><span>Tutorials</span><span class="caret"></span>
          </a>
          <div class="dropdown-menu">
            
              <a class="dropdown-item" href="/tutorials/r-tutorials"><span>R</span></a>
            
              <a class="dropdown-item" href="/tutorials/python-tutorials"><span>Python</span></a>
            
              <a class="dropdown-item" href="/tutorials/statistics"><span>Statistics</span></a>
            
          </div>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
            
            
            
              
            
            
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#gallery"><span>Gallery</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
            
            
            
              
            
            
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#contact"><span>Contact</span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">
      
      <li class="nav-item">
        <a class="nav-link js-search" href="#" aria-label="Search"><i class="fas fa-search" aria-hidden="true"></i></a>
      </li>
      

      
      <li class="nav-item dropdown theme-dropdown">
        <a href="#" class="nav-link js-theme-selector" data-toggle="dropdown" aria-haspopup="true">
          <i class="fas fa-palette" aria-hidden="true"></i>
        </a>
        <div class="dropdown-menu">
          <a href="#" class="dropdown-item js-set-theme-light">
            <span>Light</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-dark">
            <span>Dark</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-auto">
            <span>Automatic</span>
          </a>
        </div>
      </li>
      

      

    </ul>

  </div>
</nav>


  <article class="article">

  













  
  

  
  
  


<div class="article-container pt-3">
  <h1>Ý  nghĩa của biểu đồ tán xạ (scatter plot) trong dự đoán và đánh giá chất lượng mô hình dự đoán.</h1>

  

  
    


<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
          Last updated on
      
    
    Aug 26, 2020
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    9 min read
  </span>
  

  
  
  
  <span class="middot-divider"></span>
  <a href="/post/scatter-plot/#disqus_thread"></a>
  

  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fas fa-folder mr-1"></i><a href="/category/r/">R</a></span>
  

</div>

    














  
</div>





  <div class="article-container">

    <div class="article-style">
      


<hr />
<p>Nội dung của bài bao gồm:</p>
<p><a href="#sec1">1. Ý nghĩa của biểu đồ tán xạ trong bài toán dự đoán</a>.</p>
<p><a href="#sec2">2. Cách vẽ biểu đồ tán xạ trong R</a>.</p>
<p><a href="#sec3">3. Dùng biểu đồ tán xạ để đánh giá chất lượng mô hình dự đoán</a>.</p>
<hr />
<div id="sec1" class="section level2">
<h2>1. Ý nghĩa của biểu đồ tán xạ</h2>
<p>Biểu đồ tán xạ (<code>scatter plot</code>) là một dạng biểu đồ được dùng rất phổ biến trong khoa học với mục đích đánh giá mối tương quan giữa hai biến. Trong bài toán đự đoán (<code>forecasting</code>), sử dụng <code>scatter plot</code> cho phép chúng ta đánh giá được mức độ tương quan giữa các thuộc tính với nhau cũng như với các biến đầu ra của mô hình cần dự đoán, điều này cho phép lựa chọn được những chiến lược phù hợp trong quá trình chuẩn bị dữ liệu và xây dựng mô hình dự đoán.</p>
<p>Có nhiều cách phân chia sự tương quan giữa hai biến số. Nhưng một cách tổng quát nhất thì chúng ta có thể chia làm 2 loại chính là có tương quan và không tương quan (giữa hai biến số không có mối tương quan nào với nhau).</p>
<p>Trong tương quan thì có thể có các trường hợp sau đây:</p>
<ul>
<li><p><em>Tương quan thuận (tương quan dương):</em> Là mối tương quan trong đó sự gia tăng của biến số này dẫn đến sự gia tăng của biến số kia. Tương quan thuận được phân ra thành <em>tương quan thuận mạnh</em> và <em>tương quan thuận yếu</em>.</p></li>
<li><p><em>Tương quan nghịch (tương quan âm):</em> Là mối tương quan trong đó sự gia tăng của biến số này sẽ làm giảm giá trị của biến số kia. Tương quan ngịch được phân ra thành <em>tương quan nghịch mạnh</em> và <em>tương quan nghịch yếu</em>.</p></li>
<li><p><em>Tương quan phức tạp</em>: Là trường hợp mà hai biến có tương quan với nhau, tuy nhiên mối quan hệ giữa chúng không thể xác định một cách rõ ràng</p></li>
</ul>
<p><img src="/img/scatter-plot.jpg" /></p>
<p>Độ tương quan (<code>correlation</code>) giữa hai biến <code>x</code> và <code>y</code> được tính bằng công thức sau:</p>
<p><span class="math display">\[
r = \frac{\sum(x_t - \bar{x})(y_t - \bar{y})}{\sqrt{\sum(x_t - \bar{x})^2\sum(y_t - \bar{y})^2}}
\]</span></p>
<p>Giá trị của <code>r</code> luôn nằm trong khoảng -1 đến 1, với giá trị âm (<code>negative</code>) thể hiện độ tương quan nghịch và giá trị dương (<code>positive</code>) thể hiện độ tương quan thuận. Ví dụ về mức độ tương quan khác nhau theo giá trị <code>r</code> thể hiện ở hình dưới:</p>
<div class="figure">
<img src="/img/corr.PNG" alt="Nguồn ảnh: Rob J Hyndman. Forecasting: Principles and Practice" />
<p class="caption"><a href="https://otexts.com/fpp2/scatterplots.html">Nguồn ảnh: Rob J Hyndman. Forecasting: Principles and Practice</a></p>
</div>
</div>
<div id="sec2" class="section level2">
<h2>2. Cách vẽ biểu đồ tán xạ trong R</h2>
<p>Để thực hành tôi sử dụng bộ dữ liệu <code>mtcars</code> bao gồm thông tin về độ tiêu thụ nhiên liệu và 10 đặc tính khác nhau của 32 loại xe hơi. Ví dụ một số thuộc tính từ tập dữ liệu:</p>
<ul>
<li><code>mpg:</code> tiêu thụ nhiên liệu (dặm/gallon),</li>
<li><code>cyl:</code> số xy lanh,</li>
<li><code>hp:</code> công suất,</li>
<li><code>drat:</code> tỷ số xoắn</li>
<li>…</li>
</ul>
<p>Nạp dữ liệu vào phiên làm việc của R và kiểm tra 1 số hàng đầu tiên của tập dữ liệu:</p>
<pre class="r"><code>dataset &lt;- mtcars
head(dataset)</code></pre>
<pre><code>##                    mpg cyl disp  hp drat    wt  qsec vs am gear carb
## Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
## Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
## Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
## Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
## Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1</code></pre>
<p>Thử tính giá trị của <code>r</code> thủ công bằng công thức ở trên:</p>
<pre class="r"><code>x &lt;- dataset$wt
y &lt;- dataset$mpg
mean_x &lt;- mean(dataset$wt)
mean_y &lt;- mean(dataset$mpg)
r &lt;- sum((x-mean_x)*(y-mean_y))/sqrt(sum((x-mean_x)^2)*sum((y-mean_y)^2))
r</code></pre>
<pre><code>## [1] -0.8676594</code></pre>
<p>Kiểm tra xem kết quả tính <code>r</code> có đúng không bằng hàm <code>cor()</code>:</p>
<pre class="r"><code>cor(dataset$wt, dataset$mpg)</code></pre>
<pre><code>## [1] -0.8676594</code></pre>
<p><strong>2.1 Vẽ scatter plot Sử dụng <code>R base</code> funtions</strong></p>
<p>Vẽ biểu độ tán xạ giữa hai thuộc tính <code>wt</code> và <code>mpg</code>:</p>
<pre class="r"><code>plot(dataset$wt, dataset$mpg, col = &quot;blue&quot;, 
     main = &quot;Scatter Plot for mtcars dataset&quot;, 
     xlab=&quot;Car Weight &quot;, ylab=&quot;Miles Per Gallon&quot;)
# Thêm fit lines (regression line)
abline(lm(dataset$mpg~dataset$wt), col=&quot;red&quot;)</code></pre>
<p><img src="/post/2020-08-26-scatter-plot.vn_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>Cách vẽ biểu đồ Scatter Matrix sử dụng hàm <code>pairs()</code>:</p>
<pre class="r"><code>pairs(dataset[,1:4], pch = 19, col = &quot;blue&quot;)</code></pre>
<p><img src="/post/2020-08-26-scatter-plot.vn_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p><strong>2.2 Vẽ scatter plot sử dụng <code>ggplot2</code> và các gói được phát triển trên cơ sở <code>ggplot2</code></strong></p>
<p>Vẽ biểu độ tán xạ giữa hai thuộc tính <code>wt</code> và <code>mpg</code> sử dụng <code>ggplot2</code></p>
<pre class="r"><code>library(ggplot2)
ggplot(dataset, aes(x = wt, y = mpg)) +geom_point() +
  geom_smooth(method=&#39;lm&#39;, formula= y~x) #   Thêm regression line</code></pre>
<p><img src="/post/2020-08-26-scatter-plot.vn_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>Vẽ scatter plot cho hai biến <code>wt</code> và <code>mpg</code> theo groups của thuộc tính <code>cyl</code>:</p>
<pre class="r"><code>dataset$cyl &lt;- as.factor(dataset$cyl)
ggplot(dataset, aes(x = wt, y = mpg)) +
    geom_point(aes(color = cyl))</code></pre>
<p><img src="/post/2020-08-26-scatter-plot.vn_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>Thêm correlation coefficients <code>R</code> và <code>p-values</code> vào <code>scatter ggplot</code> sử dụng gói <code>ggpubr</code>:</p>
<pre class="r"><code>library(ggpubr)
sp &lt;- ggscatter(dataset, x = &quot;wt&quot;, y = &quot;mpg&quot;,
   color = &quot;cyl&quot;, palette = &quot;jco&quot;,
   add = &quot;reg.line&quot;, conf.int = TRUE)
sp + stat_cor(aes(color = cyl), label.x = 3)</code></pre>
<p><img src="/post/2020-08-26-scatter-plot.vn_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p><strong>Giải thích ý nghĩa của trị số <code>P-value</code>:</strong></p>
<p>Để hiểu về trị sô <code>p-value</code> chúng ta cần phải hiểu về qui trình kiểm định thống kê.</p>
<p>Qui trình kiểm định thống kê (<code>test of significance</code>):</p>
<p><em>Bước 1:</em> Phát biểu <code>giả thuyết vô hiệu (null hypothesis - $H_0$)</code></p>
<p><em>Bước 2:</em> Thu thập dữ liệu (D)</p>
<p><em>Bước 3:</em> Tính xác xuất của D nếu <span class="math inline">\(H_0\)</span> là đúng
<span class="math display">\[P= P_r(D|H_0)\]</span></p>
<p>Trị số <code>p</code> chính là xác suất của dữ liệu xảy ra nếu giả thuyết vô hiệu là đúng (probability of observinf the data if the null hypothesis is true). Một kết quả được coi là có ý nghĩa thống kê nếu <code>p &lt; 0.05</code>.</p>
<p><code>Lưu ý</code>: trị số <code>p</code> không có nghĩa là xác xuất của một giả thuyết - <span class="math inline">\(P(H_0)\)</span>. Ví dụ <code>p = 0.08</code> <strong>không</strong> có nghĩa là <span class="math inline">\(P(H_0) = 0.08\)</span></p>
<p>Trong trường hợp của chúng ta thì giả thuyết vô hiệu chính là không có tương quan giữa hai biến.</p>
<p><strong>Cách vẽ biểu đồ Scatter Matrix sử dụng gói <code>GGally</code>:</strong></p>
<pre class="r"><code>library(GGally)
ggpairs(dataset[,1:5], title=&quot;A scatterplot matrix&quot;) </code></pre>
<p><img src="/post/2020-08-26-scatter-plot.vn_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
</div>
<div id="sec3" class="section level2">
<h2>3. Dùng biểu đồ tán xạ để đánh giá chất lượng mô hình dự đoán</h2>
<p>Trong thực thế thì không tồn tại mô hình dự đoán với độ chính xác tuyệt đối, mọi mô hình luôn cho sai số dự báo (<code>forecast error</code>): <span class="math inline">\(E = y - y&#39;\)</span> thể hiện độ chênh lệnh giữa giá trị thực và giá trị dự đoán. Để đánh giá độ chính xác của một mô hình dự đoán người ta thường dùng một số thước đo như là:</p>
<p><em>Trung bình sai số tuyệt đồi (Mean absolute error)</em></p>
<p><span class="math display">\[MAE = \frac{\sum_{i=1}^{n}(|e_i|)}{n}\]</span></p>
<p>Trong đó, <span class="math inline">\(e_i = y_i - \hat{y_i}\)</span></p>
<p><em>Trung bình sai số tương đối (Mean absolute percent error)</em></p>
<p><span class="math display">\[MAPE = \frac{\sum_{i=1}^{n}\frac{|e_i|}{y_i}}{n}\]</span></p>
<p><em>Trung bình bình phương sai số (Mean squared error)</em></p>
<p><span class="math display">\[MSE = \frac{\sum_{i=1}^{n}e_i^2}{n}\]</span></p>
<p><em>Căn bậc hai trung bình bình phương (Root mean squared error)</em></p>
<p><span class="math display">\[\sqrt{MSE = \frac{\sum_{i=1}^{n}e_i^2}{n}}\]</span></p>
<p>…</p>
<p>Tuy nhiên việc sử dụng chỉ những thước đo này là chưa đủ và đôi khi có thể dẫn đến đánh giá sai chất lượng mô hình dự đoán. Để biết tại sao là chưa đủ các bạn có thể đọc một số công bố khoa học của chúng tôi như là:</p>
<p><a href="https://forvis.github.io/">1. Forcast Evaluation Framework</a></p>
<p><a href="https://forvis.github.io/our-publications/1.pdf">2. Data Schemas for Forecasting</a></p>
<p><a href="https://vixra.org/pdf/1903.0354v1.pdf">3. Data Formats and Visual Tools for Forecast Evaluation</a></p>
<p><a href="https://forvis.github.io/our-publications/5.pdf">4. Measuring forecasting accuracy: The case of judgmental adjustments to SKU-level demand forecasts</a></p>
<p>Trong phạm vi post này tôi sẽ giới thiệu với các bạn cách đánh giá chất lượng của các mô hình dự đoán bằng cách sử dụng <code>scatter plot</code>.</p>
<p>Để đánh giá chất lượng mô hình dự đoán bằng <code>scatter plot</code> chúng ta cần tạo một <code>scatter plot</code> với trục <code>Oy</code> là giá trị thực (<code>y</code>) và trục <code>Ox</code> là giá trị dự đoán (<code>y'</code>). Tập hợp các điểm mà tại đó giá trị dự đoán bằng với giá trị thực <span class="math inline">\(y = y&#39;\)</span> (hay <span class="math inline">\(E = 0\)</span>) tạo thành một đường thẳng gọi là <code>perfect forecast line</code>. Vì vậy mỗi giá trị dự đoán tương ứng với giá trị thực sẽ có tọa độ là: <span class="math inline">\(y_i&#39; = y_i + e_i\)</span></p>
<p><img src="/img/error.PNG" /></p>
<p>Tập hợp các cặp điểm (<code>yy'</code>) còn lại (không nằm trên đường <code>perfect forecast</code>) sẽ tạo thành một đám mây phân tán xạ dọc theo đường <code>perfect forecast</code>. Mức độ tán xạ (độ lệnh) của các điểm so với đường <code>perfect forecast</code> cho phép chúng ta đánh giá được độ chính xác của mô hình dự đoán. Biểu đố tán xạ trong trường hợp này được gọi là <code>Prediction-Realization Diagram (PRD)</code>.</p>
<p><img src="/img/prd.PNG" /></p>
<p>Trong PRD, nếu phần lớn các điểm phân bố dọc theo đường <code>perfect forecast</code> và có rất ít hoặc không có các điểm phân tán cách xa đường này thì mô hình dự đoán đó có chất lượng tốt. Trường hợp ngược lại có nghĩa là mô hình có chất lượng kém.</p>
<p>Để minh họa tôi sẽ sử dụng <code>PRD</code> để so sánh các mô hình dự đoán khác nhau được sử dụng trong cuộc thi dự đoán thế giới <a href="https://forecasters.org/resources/time-series-data/m3-competition/">M3 forecasting competition</a>. Trong cuộc thi này, <code>22</code> mô hình được sử dụng để test với <code>3003</code> tập dữ liệu chuỗi thời gian khác nhau.</p>
<p>Dữ liệu này đã được tôi xử lý và lưu trong gói <code>forvision</code> nằm trong <a href="https://forvis.github.io/">Forecast evaluation framework</a> được chúng tôi thực hiện vào năm 2018. Để biết thêm thông tin các bạn có thể đọc ở <code>website</code> của dự án tại <a href="https://forvis.github.io/">đây</a>.</p>
<p>Để tải gói <code>forvision</code> về cài đặt trong R các bạn dùng lệnh sau:</p>
<pre class="r"><code>install.packages(&quot;devtools&quot;)
devtools::install_github(&quot;forvis/forvision&quot;, build_vignettes = TRUE)</code></pre>
<p>Nạp gói <code>forvision</code> và xuất dữ liệu để thực hành:</p>
<pre class="r"><code>library(forvision)
m3_dataset &lt;- createAFTS(m3_yearly_ts, m3_yearly_fc)</code></pre>
<p>Kiểm tra tập dữ liệu:</p>
<pre class="r"><code>head(m3_dataset)</code></pre>
<pre><code>## # A tibble: 6 x 8
##   series_id category value timestamp method_id forecast horizon origin_timestamp
##   &lt;chr&gt;     &lt;chr&gt;    &lt;dbl&gt;     &lt;int&gt; &lt;chr&gt;        &lt;dbl&gt;   &lt;int&gt;            &lt;int&gt;
## 1 Y641      OTHER     6060      1841 NAIVE2       5230        1             1840
## 2 Y641      OTHER     6060      1841 SINGLE       5352.       1             1840
## 3 Y641      OTHER     6060      1841 HOLT         5216.       1             1840
## 4 Y641      OTHER     6060      1841 DAMPEN       4962.       1             1840
## 5 Y641      OTHER     6060      1841 WINTER       5216.       1             1840
## 6 Y641      OTHER     6060      1841 COMB S-H~    5177.       1             1840</code></pre>
<p>Vẽ scatter plot (<code>PRD</code>) để so sánh chất lượng các mô hình khác nhau:</p>
<pre class="r"><code>m3_dataset$method_id &lt;- as.factor(m3_dataset$method_id)
# Plot
gp &lt;- ggplot() +
  geom_point(data = m3_dataset, ggplot2::aes(x = forecast, y= value,colour = method_id,shape = method_id)) +
  scale_shape_manual(values=1:nlevels(m3_dataset$method_id))+
  geom_line(data = m3_dataset, ggplot2::aes(x = value, y=value, linetype = &quot;perfect forecast&quot;)) +
  ggtitle(&quot;Prediction-Realization Diagram&quot;) +
  guides(linetype = ggplot2::guide_legend(&quot;&quot;))
gp</code></pre>
<p><img src="/post/2020-08-26-scatter-plot.vn_files/figure-html/unnamed-chunk-13-1.png" width="960" /></p>
<p>Chỉ so sánh 4 mô hình <code>c("ARARMA", "DAMPEN", "ForcX", "WINTER")</code> với nhau:</p>
<pre class="r"><code>m3_dataset &lt;-  dplyr::filter(m3_dataset[1:2000,], method_id %in% c(&quot;ARARMA&quot;, &quot;DAMPEN&quot;, &quot;ForcX&quot;, &quot;WINTER&quot;))
m3_dataset$method_id &lt;- as.factor(m3_dataset$method_id)
# Plot
gp &lt;- ggplot()+
  geom_point(data = m3_dataset, ggplot2::aes(x = forecast, y= value,colour = method_id, shape = method_id)) +
  scale_shape_manual(values=1:nlevels(m3_dataset$method_id))+
  geom_line(data = m3_dataset, ggplot2::aes(x = value, y=value, linetype = &quot;perfect forecast&quot;), size = 1) +
  ggtitle(&quot;Prediction-Realization Diagram&quot;) +
  guides(linetype = ggplot2::guide_legend(&quot;&quot;))
gp</code></pre>
<p><img src="/post/2020-08-26-scatter-plot.vn_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
</div>

    </div>

    






<div class="article-tags">
  
  <a class="badge badge-light" href="/tag/forecasting/">Forecasting</a>
  
  <a class="badge badge-light" href="/tag/scatter-plot/">Scatter Plot</a>
  
  <a class="badge badge-light" href="/tag/data-visualization/">Data Visualization</a>
  
  <a class="badge badge-light" href="/tag/p-value/">P-value</a>
  
  <a class="badge badge-light" href="/tag/forecast-evaluation/">Forecast evaluation</a>
  
  <a class="badge badge-light" href="/tag/prediction-realization-diagram/">Prediction-Realization Diagram</a>
  
</div>



<div class="share-box" aria-hidden="true">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=/post/scatter-plot/&amp;text=%c3%9d%20%20ngh%c4%a9a%20c%e1%bb%a7a%20bi%e1%bb%83u%20%c4%91%e1%bb%93%20t%c3%a1n%20x%e1%ba%a1%20%28scatter%20plot%29%20trong%20d%e1%bb%b1%20%c4%91o%c3%a1n%20v%c3%a0%20%c4%91%c3%a1nh%20gi%c3%a1%20ch%e1%ba%a5t%20l%c6%b0%e1%bb%a3ng%20m%c3%b4%20h%c3%acnh%20d%e1%bb%b1%20%c4%91o%c3%a1n." target="_blank" rel="noopener" class="share-btn-twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=/post/scatter-plot/&amp;t=%c3%9d%20%20ngh%c4%a9a%20c%e1%bb%a7a%20bi%e1%bb%83u%20%c4%91%e1%bb%93%20t%c3%a1n%20x%e1%ba%a1%20%28scatter%20plot%29%20trong%20d%e1%bb%b1%20%c4%91o%c3%a1n%20v%c3%a0%20%c4%91%c3%a1nh%20gi%c3%a1%20ch%e1%ba%a5t%20l%c6%b0%e1%bb%a3ng%20m%c3%b4%20h%c3%acnh%20d%e1%bb%b1%20%c4%91o%c3%a1n." target="_blank" rel="noopener" class="share-btn-facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="mailto:?subject=%c3%9d%20%20ngh%c4%a9a%20c%e1%bb%a7a%20bi%e1%bb%83u%20%c4%91%e1%bb%93%20t%c3%a1n%20x%e1%ba%a1%20%28scatter%20plot%29%20trong%20d%e1%bb%b1%20%c4%91o%c3%a1n%20v%c3%a0%20%c4%91%c3%a1nh%20gi%c3%a1%20ch%e1%ba%a5t%20l%c6%b0%e1%bb%a3ng%20m%c3%b4%20h%c3%acnh%20d%e1%bb%b1%20%c4%91o%c3%a1n.&amp;body=/post/scatter-plot/" target="_blank" rel="noopener" class="share-btn-email">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=/post/scatter-plot/&amp;title=%c3%9d%20%20ngh%c4%a9a%20c%e1%bb%a7a%20bi%e1%bb%83u%20%c4%91%e1%bb%93%20t%c3%a1n%20x%e1%ba%a1%20%28scatter%20plot%29%20trong%20d%e1%bb%b1%20%c4%91o%c3%a1n%20v%c3%a0%20%c4%91%c3%a1nh%20gi%c3%a1%20ch%e1%ba%a5t%20l%c6%b0%e1%bb%a3ng%20m%c3%b4%20h%c3%acnh%20d%e1%bb%b1%20%c4%91o%c3%a1n." target="_blank" rel="noopener" class="share-btn-linkedin">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="whatsapp://send?text=%c3%9d%20%20ngh%c4%a9a%20c%e1%bb%a7a%20bi%e1%bb%83u%20%c4%91%e1%bb%93%20t%c3%a1n%20x%e1%ba%a1%20%28scatter%20plot%29%20trong%20d%e1%bb%b1%20%c4%91o%c3%a1n%20v%c3%a0%20%c4%91%c3%a1nh%20gi%c3%a1%20ch%e1%ba%a5t%20l%c6%b0%e1%bb%a3ng%20m%c3%b4%20h%c3%acnh%20d%e1%bb%b1%20%c4%91o%c3%a1n.%20/post/scatter-plot/" target="_blank" rel="noopener" class="share-btn-whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=/post/scatter-plot/&amp;title=%c3%9d%20%20ngh%c4%a9a%20c%e1%bb%a7a%20bi%e1%bb%83u%20%c4%91%e1%bb%93%20t%c3%a1n%20x%e1%ba%a1%20%28scatter%20plot%29%20trong%20d%e1%bb%b1%20%c4%91o%c3%a1n%20v%c3%a0%20%c4%91%c3%a1nh%20gi%c3%a1%20ch%e1%ba%a5t%20l%c6%b0%e1%bb%a3ng%20m%c3%b4%20h%c3%acnh%20d%e1%bb%b1%20%c4%91o%c3%a1n." target="_blank" rel="noopener" class="share-btn-weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>












  
  





  
    
    
    
      
    
    
    
    <div class="media author-card content-widget-hr">
      
        
        <img class="avatar mr-3 avatar-circle" src="/author/cuong-sai/avatar_hu52a603635ecebd45650b162dadabb4e5_12861_270x270_fill_q90_lanczos_center.jpg" alt="Cuong Sai">
      

      <div class="media-body">
        <h5 class="card-title"><a href="/">Cuong Sai</a></h5>
        <h6 class="card-subtitle">PhD student</h6>
        <p class="card-text">My research interests include Industrial AI (Intelligent predictive maintenance), Machine and Deep learning, Time series forecasting, Intelligent machinery fault diagnosis, Prognostics and health management, Error metrics / forecast evaluation.</p>
        <ul class="network-icon" aria-hidden="true">
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="/#contact" >
        <i class="fas fa-envelope"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://web.facebook.com/csdatascience" target="_blank" rel="noopener">
        <i class="fab fa-facebook"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://github.com/forvis" target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://github.com/svcuong" target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
    </li>
  
</ul>

      </div>
    </div>
  







<section id="comments">
  
    
<div id="disqus_thread"></div>
<script>
  let disqus_config = function () {
    
    
    
  };
  (function() {
    if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
      document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
      return;
    }
    var d = document, s = d.createElement('script'); s.async = true;
    s.src = 'https://' + "cuongsai" + '.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


  
</section>








  
  
  <div class="article-widget content-widget-hr">
    <h3>Related</h3>
    <ul>
      
      <li><a href="/post/pipes/">Cách sử dụng các toán tử pipes trong R</a></li>
      
      <li><a href="/post/ensemble-learning/">Phương pháp Ensemble Learning trong Machine Learning: Boosting, Bagging, Stacking (Sử dụng R code)</a></li>
      
      <li><a href="/post/crypto/">Cách scrape một trang web bằng R. Scrape và so sánh dữ liệu lịch sử thị trường  tiền điện tử từ CoinMarketCap</a></li>
      
      <li><a href="/post/ggplot-plotly/">Data visualization với ggplot2. Chuyển đổi từ ggplot2 objects sang biểu đồ tương tác plotly</a></li>
      
      <li><a href="/post/covid-19-r/">Biến đổi và trực quan hóa dữ liệu Covid-19 từ John Hopkins database với R</a></li>
      
    </ul>
  </div>
  




 
  </div>
</article>

      

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/instant.page/5.1.0/instantpage.min.js" integrity="sha512-1+qUtKoh9XZW7j+6LhRMAyOrgSQKenQ4mluTR+cvxXjP1Z54RxZuzstR/H9kgPXQsVB8IW7DMDFUJpzLjvhGSQ==" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/highlight.min.js" integrity="sha512-7t8APmYpzEsZP7CYoA7RfMPV9Bb+PJHa9x2WiUnDXZx3XHveuyWUtvNOexhkierl5flZ3tr92dP1mMS+SGlD+A==" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/languages/r.min.js"></script>
        
      

    

    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.js" integrity="sha256-EErZamuLefUnbMBQbsEqu1USa+btR2oIlCpBJbyD4/g=" crossorigin="anonymous"></script>
    

    
    
    <script>const code_highlighting = true;</script>
    

    
    
    <script>const isSiteThemeDark = false;</script>
    

    
    
    
    
    
    
    <script>
      const search_config = {"indexURI":"/index.json","minLength":1,"threshold":0.3};
      const i18n = {"no_results":"No results found","placeholder":"Search...","results":"results found"};
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks",
        'slides' : "Slides"
        };
    </script>
    

    
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    

    
    
    <script id="dsq-count-scr" src="https://cuongsai.disqus.com/count.js" async></script>
    

    
    
    
    
    
    
    
    
    
      
    
    
    
    
    <script src="/js/academic.min.3b2b658c61ebd725bd5fc606c89fe44c.js"></script>

    






  
  
  <div class="container">
    <footer class="site-footer">
  
  <p class="powered-by">
    
      <a href="/privacy/">Privacy Policy</a>
    
    
       &middot; 
      <a href="/terms/">Terms</a>
    
  </p>
  

  <p class="powered-by">
    © 2020 Cuong Sai. All Rights Reserved
  </p>

  
  






  <p class="powered-by">
    
    Powered by the
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a>
    for
    <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a>
    

    
    <span class="float-right" aria-hidden="true">
      <a href="#" class="back-to-top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
  </p>
</footer>

  </div>
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
