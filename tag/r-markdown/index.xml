<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>R Markdown | Khoa Học Dữ Liệu</title>
    <link>/tag/r-markdown/</link>
      <atom:link href="/tag/r-markdown/index.xml" rel="self" type="application/rss+xml" />
    <description>R Markdown</description>
    <generator>Source Themes Academic (https://sourcethemes.com/academic/)</generator><language>en-us</language><copyright>© 2020 Cuong Sai. All Rights Reserved</copyright><lastBuildDate>Wed, 18 Apr 2018 00:00:00 +0000</lastBuildDate>
    <image>
      <url>/images/icon_hu47efca792e1e7000f9078d7b8f1dac48_31011_512x512_fill_lanczos_center_2.PNG</url>
      <title>R Markdown</title>
      <link>/tag/r-markdown/</link>
    </image>
    
    <item>
      <title>Sử dụng kết hợp R và Python trong data science</title>
      <link>/post/s-d-ng-k-t-h-p-r-va-python-trong-data-science/</link>
      <pubDate>Wed, 18 Apr 2018 00:00:00 +0000</pubDate>
      <guid>/post/s-d-ng-k-t-h-p-r-va-python-trong-data-science/</guid>
      <description>


&lt;p&gt;Một câu hỏi thường hay đặt ra bởi nhiều nhà khoa học dữ liệu, đặc biệt là những người mới trong lĩnh vực này đó là: Python hay R tốt hơn cho khoa học dữ liệu? Thực ra còn nhiều ngôn ngữ khác cho khoa học dữ liệu như là: Java, C, Scala, Matlab, Julia,…nhưng Python và R đang dẫn đầu trong phần lớn thế giới khoa học dữ liệu.&lt;/p&gt;
&lt;p&gt;R vốn được thiết kế bởi các nhà thống kê và đã trở thành lựa chọn hàng đầu cho những ai bước vào lĩnh vực khoa học dữ liệu. Một trong những thế mạnh chính của R là số lượng khổng lồ các packages chuyên dụng và cộng đồng support vô cùng lớn. Tuy nhiên, độ phổ biến của nó gần đây đã giảm đi một chút.&lt;/p&gt;
&lt;p&gt;Trong khi đó, Python là ngôn ngữ đa mục đích có thể sử dụng trong nhiều lĩnh vực khác nhau từ lập trình ứng dụng web đến viết game. Có thể thấy là hiện nay Python đang thách thức ngôi vị lâu đầu của R như là một ngôn ngữ chung cho các nhà khoa học dữ liệu.&lt;/p&gt;
&lt;p&gt;Tuy nhiên các doanh nghiệp sẽ không ưu tiên ngôn ngữ nào khi xem xét các kỹ năng của một nhà khoa học dữ liệu, vì vậy các bạn phải biết cách linh hoạt trong việc sử dụng các ngôn ngữ này làm công cụ cho khoa học dữ liệu làm sao hiệu quả nhất.&lt;/p&gt;
&lt;p&gt;Cả R và Python đều có sử dụng để giải quyết các bài toán tương tự nhau trong khoa học dữ liệu. Cả hai đều có những packages hoặc libraries để giải quyết những vấn đề trong phân tích dữ liệu như tiền xủ lý, ứng dụng machine learning cho dữ liệu. Cả hai đều là lựa chọn tốt cho nghiên cứu khả lặp - một kỹ năng đòi hỏi trong rất nhiều lĩnh vực khác nhau. Tuy nhiên hai ngôn ngữ này lại có những tính năng tuyệt vời và điểm mạnh riêng vì vậy chúng ta nên kết hợp chúng để tận dụng những lợi thế của nhau, chỗ nào tiện và mạnh cái gì thì dùng cái đó. Hình dưới đây mô tả tóm tắt những điểm nổi trội của hai ngôn ngữ này:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-08-18-s-d-ng-k-t-h-p-r-và-python-trong-data-science.vn_files/r-python.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Ở post này tôi sẽ giới thiệu với các bạn cách kết hợp hai ngôn ngữ này trong môi trường R bằng cách sử dụng package &lt;a href=&#34;https://rstudio.github.io/reticulate/&#34;&gt;reticulate&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Trước hết để tiến hành làm việc với Python và R chúng ta cần cài đặt chúng:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Python:&lt;/strong&gt; Nếu bạn muốn đơn giản hóa việc tạo môi trường khi thực hiện các dự án bằng Python, đặc biệt liên quan đến các lĩnh vực khoa học dữ liệu, AI, Data, … Anaconda sẽ là lựa chọn bạn nên cân nhắc. Bạn có thể tải và cài Anaconda tại &lt;a href=&#34;https://www.anaconda.com/products/individual#macos&#34;&gt;đây&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;R:&lt;/strong&gt; Để làm việc với R các bạn cần tải R và Rstudio. Tải và cài phiên bản R mới nhất tại &lt;a href=&#34;https://cran.r-project.org/bin/windows/base/&#34;&gt;đây&lt;/a&gt;. Tải và cài đặt RStudion tại &lt;a href=&#34;https://rstudio.com/products/rstudio/download/&#34;&gt;đây&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Để kết hợp R và Python trong môi trường R chúng ta cần cài R package &lt;code&gt;reticulate&lt;/code&gt; bằng câu lệnh sau:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;install.packages(&amp;quot;reticulate&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Tuy nhiên cách cài đặt như các bạn vừa thực hiện ở trên là không khuyến khích. Nguyên nhân là một
số gói của R để sử dụng được còn phụ thuộc vào một hoặc một số gói khác. Do vậy an toàn nhất là cài
đặt với lựa chọn &lt;code&gt;dependencies = TRUE&lt;/code&gt; với hàm ý rằng chúng ta sẽ cài đặt luôn tất cả các gói phụ
thuộc:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;install.packages(&amp;quot;reticulate&amp;quot;, dependencies = TRU)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Package &lt;code&gt;reticulate&lt;/code&gt; gồm các công cụ hỗ trợ tương tác giữa R và Python. Cụ thể package này giải quyết được những việc sau:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Gọi Python từ R bằng những phương pháp khác nhau: từ R Markdown, từ mã nguồn Python, import các Python modules, và sử dụng tương tác trực tiếp trên R session.&lt;/li&gt;
&lt;li&gt;Chuyển đổi các đối tượng R và Python với nhau (ví dụ giữa các data frames R và Pandas, giữa các R matrices và NumPy arrays)&lt;/li&gt;
&lt;li&gt;Liên kết linh hoạt giữa các phiên bản Python khác nhau bao gồm cả virtual environments và Conda environments.&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;strong&gt;Kêt hợp R và Python&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Để có thể dùng Python trong môi trường R chúng ta cần nạp thư thư viện &lt;code&gt;reticulate&lt;/code&gt; theo câu lệnh sau:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(reticulate)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Để kiểm tra môi trường Python có trong máy, các bạn dùng câu lệnh sau:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;conda_list()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##           name
## 1    Anaconda3
## 2           TF
## 3      rstudio
## 4 r-reticulate
## 5     r-tf-gpu
##                                                                          python
## 1                                       C:\\Users\\svcuo\\Anaconda3\\python.exe
## 2                             C:\\Users\\svcuo\\Anaconda3\\envs\\TF\\python.exe
## 3                        C:\\Users\\svcuo\\Anaconda3\\envs\\rstudio\\python.exe
## 4 C:\\Users\\svcuo\\AppData\\Local\\r-miniconda\\envs\\r-reticulate\\python.exe
## 5     C:\\Users\\svcuo\\AppData\\Local\\r-miniconda\\envs\\r-tf-gpu\\python.exe&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Dùng hàm &lt;code&gt;use_python()&lt;/code&gt; cho phép bạn chỉ định rõ phiên bản Python cần thiết:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;use_python(&amp;quot;C:/Users/svcuo/Anaconda3/python.exe&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Sử dụng hàm &lt;code&gt;use_virtualenv()&lt;/code&gt; và &lt;code&gt;use_condaenv()&lt;/code&gt; cho phép bạn chỉ định phiên bản Python của bạn làm việc trong môi trường virtual hay là Conda:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;use_virtualenv(&amp;quot;myenv&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Ta có thể cài đặt bất kỳ python library nào trong R bằng cách dùng hàm &lt;code&gt;py_install()&lt;/code&gt; như sau:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;py_install(&amp;quot;pandas&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;strong&gt;Các cách sử dụng kết hợp Python và R trong môi trường R&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1. Import các python modules&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Sử dụng hàm &lt;code&gt;import()&lt;/code&gt; cho phép bạn có thể gọi mọi python library và sử dụng trong R:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;os &amp;lt;- import(&amp;quot;os&amp;quot;)
os$listdir(&amp;quot;.&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt; [1] &amp;quot;.RData&amp;quot;       &amp;quot;.Rhistory&amp;quot;    &amp;quot;.Rproj.user&amp;quot;  &amp;quot;assets&amp;quot;       &amp;quot;config&amp;quot;      
 [6] &amp;quot;config.toml&amp;quot;  &amp;quot;content&amp;quot;      &amp;quot;index.Rmd&amp;quot;    &amp;quot;myblog.Rproj&amp;quot; &amp;quot;public&amp;quot;      
[11] &amp;quot;resources&amp;quot;    &amp;quot;static&amp;quot;       &amp;quot;themes&amp;quot;     &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;2. Sourcing Python scripts&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Bạn có thể nạp bất kỳ một Python scripts nào vào R sử dụng hàm &lt;code&gt;source_python()&lt;/code&gt;. Ví dụ bạn có một Python script tên là &lt;code&gt;flights.py&lt;/code&gt; có dạng:&lt;/p&gt;
&lt;pre class=&#34;python&#34;&gt;&lt;code&gt;import pandas as pd

def read_flights(file):
  flights = pd.read_csv(file)
  flights = flights[flights[&amp;#39;dest&amp;#39;] == &amp;quot;ORD&amp;quot;]
  flights = flights[[&amp;#39;carrier&amp;#39;, &amp;#39;dep_delay&amp;#39;, &amp;#39;arr_delay&amp;#39;]]
  flights = flights.dropna()
  return flights&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Và các bạn có thể nạp và thực thi nó trên R như sau:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;source_python(&amp;quot;RPython/flights.py&amp;quot;)
flights &amp;lt;- read_flights(&amp;quot;flights.csv&amp;quot;)

library(ggplot2)
ggplot(flights, aes(carrier, arr_delay)) + geom_point() + geom_jitter()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;3. Python REPL&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Hàm &lt;code&gt;repl_python()&lt;/code&gt; cho phép các bạn có thể làm việc trực tiếp với Python trên R session. Các đối tượng được tạo ra từ Python REPL có thể được truy cập từ R bằng cách sử dụng &lt;em&gt;py$object&lt;/em&gt;. Ví dụ:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-08-18-s-d-ng-k-t-h-p-r-và-python-trong-data-science.vn_files/python-repl.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Dùng lệnh &lt;code&gt;exit&lt;/code&gt; để thoát python REPL&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Chú ý:&lt;/strong&gt; Trong Python code có thể sử dụng mọi đối tượng được tạo ra từ R bằng các sử dụng đối tượng &lt;code&gt;r.object&lt;/code&gt; (ví dụ &lt;code&gt;r.flights&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;4. Sử dụng python trong R markdown&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Package &lt;code&gt;reticulate&lt;/code&gt; hỗ trợ Python engine cho R Markdown với những thuộc tính sau:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Chạy Python code chunks tích hợp trong R session( cho phép trao đổi các đối tượng với nhau)&lt;/li&gt;
&lt;li&gt;Hiển thị Python output, bao gồm cả output từ matplotlib&lt;/li&gt;
&lt;li&gt;Truy cập tới các đối tượng được tạo ra từ Python chunks và ngược lại từ R chunks (sử dụng &lt;code&gt;py$object&lt;/code&gt; và &lt;code&gt;r.object&lt;/code&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Chúng ta hãy cùng xem ví dụ kết hợp R và Python đơn giản sau:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Nạp dữ liệu vào Python:&lt;/p&gt;
&lt;pre class=&#34;python&#34;&gt;&lt;code&gt;# Python
import pandas as pd
dataset_url = &amp;#39;https://raw.githubusercontent.com/forvis/MLdata/master/pima-indians-diabetes.data.csv&amp;#39;

names = [&amp;#39;preg&amp;#39;, &amp;#39;plas&amp;#39;, &amp;#39;pres&amp;#39;, &amp;#39;skin&amp;#39;, &amp;#39;test&amp;#39;, &amp;#39;mass&amp;#39;, &amp;#39;pedi&amp;#39;, &amp;#39;age&amp;#39;, &amp;#39;class&amp;#39;]
data = pd.read_csv(dataset_url, names = names)
print(data.head())&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##    preg  plas  pres  skin  test  mass   pedi  age  class
## 0     6   148    72    35     0  33.6  0.627   50      1
## 1     1    85    66    29     0  26.6  0.351   31      0
## 2     8   183    64     0     0  23.3  0.672   32      1
## 3     1    89    66    23    94  28.1  0.167   21      0
## 4     0   137    40    35   168  43.1  2.288   33      1&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Sau đó chuyển dữ liệu và thao tác với dữ liệu bằng R:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# R
table(py$data$preg)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 
##   0   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  17 
## 111 135 103  75  68  57  50  45  38  28  24  11   9  10   2   1   1&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Thực hiện data visualization trong R vơi base function &lt;code&gt;boxplot()&lt;/code&gt;:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# R
x &amp;lt;- py$data[,1:8]
y &amp;lt;- py$data[,9]

# Boxplot for first 4 attribute
names = c(&amp;#39;preg&amp;#39;, &amp;#39;plas&amp;#39;, &amp;#39;pres&amp;#39;, &amp;#39;skin&amp;#39;)
par(mfrow=c(1,4))
for(i in 1:4) {
boxplot(x[,i], main=names[i])
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-08-18-s-d-ng-k-t-h-p-r-và-python-trong-data-science.vn_files/figure-html/unnamed-chunk-14-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Thực hiện data visualization trong R với &lt;code&gt;ggplot2&lt;/code&gt;:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# R
library(ggplot2)
py$data$class &amp;lt;- factor(py$data$class)
ggplot(data = py$data,aes(x = preg)) +
  geom_histogram(binwidth = 0.5,aes(fill = class),position = &amp;quot;dodge&amp;quot;) +
  ggtitle(&amp;quot;Pregnancies Data Distribution&amp;quot;) + ylab(&amp;quot;class Counts&amp;quot;) +
  theme_gray() +
  theme_update(plot.title = element_text(hjust = 0.5))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-08-18-s-d-ng-k-t-h-p-r-và-python-trong-data-science.vn_files/figure-html/unnamed-chunk-15-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;strong&gt;Tham khảo:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;sub&gt;&lt;a href=&#34;https://rstudio.github.io/reticulate/&#34;&gt;R Interface to Python&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Mở đầu với R Markdown</title>
      <link>/post/2015-07-23-r-rmarkdown/</link>
      <pubDate>Thu, 23 Jul 2015 21:13:14 -0500</pubDate>
      <guid>/post/2015-07-23-r-rmarkdown/</guid>
      <description>


&lt;div id=&#34;r-markdown&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;R Markdown&lt;/h1&gt;
&lt;p&gt;This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see &lt;a href=&#34;http://rmarkdown.rstudio.com&#34; class=&#34;uri&#34;&gt;http://rmarkdown.rstudio.com&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;You can embed an R code chunk like this:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;summary(cars)
##      speed           dist       
##  Min.   : 4.0   Min.   :  2.00  
##  1st Qu.:12.0   1st Qu.: 26.00  
##  Median :15.0   Median : 36.00  
##  Mean   :15.4   Mean   : 42.98  
##  3rd Qu.:19.0   3rd Qu.: 56.00  
##  Max.   :25.0   Max.   :120.00
fit &amp;lt;- lm(dist ~ speed, data = cars)
fit
## 
## Call:
## lm(formula = dist ~ speed, data = cars)
## 
## Coefficients:
## (Intercept)        speed  
##     -17.579        3.932&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;including-plots&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Including Plots&lt;/h1&gt;
&lt;p&gt;You can also embed plots. See Figure &lt;a href=&#34;#fig:pie&#34;&gt;1&lt;/a&gt; for example:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;par(mar = c(0, 1, 0, 1))
pie(
  c(280, 60, 20),
  c(&amp;#39;Sky&amp;#39;, &amp;#39;Sunny side of pyramid&amp;#39;, &amp;#39;Shady side of pyramid&amp;#39;),
  col = c(&amp;#39;#0292D8&amp;#39;, &amp;#39;#F7EA39&amp;#39;, &amp;#39;#C4B632&amp;#39;),
  init.angle = -50, border = NA
)&lt;/code&gt;&lt;/pre&gt;
&lt;div class=&#34;figure&#34;&gt;&lt;span id=&#34;fig:pie&#34;&gt;&lt;/span&gt;
&lt;img src=&#34;/post/2015-07-23-r-rmarkdown_files/figure-html/pie-1.png&#34; alt=&#34;A fancy pie chart.&#34; width=&#34;672&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;
Figure 1: A fancy pie chart.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
  </channel>
</rss>
